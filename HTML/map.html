<!DOCTYPE HTML>
<!--
        Forty by HTML5 UP
        html5up.net | @ajlkn
        Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
    <head>
        <title>The Map - AMP</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
        <link rel="stylesheet" href="assets/css/main.css" />
        <!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
        <!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
        <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.46.0/mapbox-gl.js'></script>
        <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.46.0/mapbox-gl.css' rel='stylesheet' />

    </head>
    <body>

        <!-- Wrapper -->
        <div id="wrapper">

            <!-- Header -->
            <!-- Header -->
            <header id="header" class="alt">
                <a href="index.html" class="logo"><strong>AMP</strong> <span>Action Mapping Project</span></a>
                <nav>
                    <a href="#menu">Menu</a>
                </nav>
            </header>

            <!-- Menu -->
            <nav id="menu">
                <ul class="links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About AMP</a></li>
                    <li><a href="roadmap.html">The Work Plan</a></li>
                    <li><a href="team.html">Meet the Team</a></li>
                </ul>
                <ul class="actions vertical">
                    <li><a href="map.html" class="button special fit">View the Map</a></li>
                    <li><a href="uploadNew.html" class="button fit">Upload New Data</a></li>
                </ul>
            </nav>

            <!-- Main -->
            <div id="main" class="alt">
                <style>
                    #mapMenu {                      
                        padding: 5px;
                        font-family: 'Open Sans', sans-serif;
                    }
                </style>

                <div class="row">
                    <div class="6u 12u$(small)" id="map" style="height: 75vh;"></div>

                    <div class="6u$ 12u$(small)">
                        <h3>Pilot Study, 2016</h3>
                        <p>
                            The pilot study was completed in 2016 with maps from Stuart Middle School and Lincoln High School students. Students were asked to identify on a map areas in response to 4 questions.
                        </p>
                        <p>
                            Toggle the questions below to view the results of the pilot study. For each question, higher intensity color represents increased response rate for that location.
                        </p>
                        <hr>
                        <h4>Questions:</h4>
                        <div id="mapMenu">
                            <input id='QB_areas_use' type='radio' name='rtoggle' value='QB_areas_use' checked='checked'>
                            <label for='QB_areas_use'>When not at home or school, where do you spend your time?</label>
                            <input id='QF_areas_avoid' type='radio' name='rtoggle' value='QF_areas_avoid'>
                            <label for='QF_areas_avoid'>When not at home or school, what areas do you avoid?</label>
                            <input id='QD_routes_use' type='radio' name='rtoggle' value='QD_routes_use'>
                            <label for='QD_routes_use'>What routes do you use when walking or biking?</label>
                            <input id='QE_routes_avoid' type='radio' name='rtoggle' value='QE_routes_avoid'>
                            <label for='QE_routes_avoid'>What routes do you avoid when walking or biking?</label>
                        </div>
                    </div>
                </div>

                <script>
                    mapboxgl.accessToken = 'pk.eyJ1Ijoic2V0b20iLCJhIjoiY2o5NmN0dHB4MDNoaDJ3bWw1N2JvemlpaSJ9.McVFy9qwVkdrV_anNWv7jw';
                    var map = new mapboxgl.Map({
                        container: 'map',
                        style: 'mapbox://styles/setom/cjixem7oa1hr82rs0z0nr4wz4',
                        zoom: 12,
                        center: [-122.425692, 47.210000]
                    });
                    map.addControl(new mapboxgl.NavigationControl());

                    var layerList = document.getElementById('mapMenu');
                    var inputs = layerList.getElementsByTagName('input');

                    function toggleLayer(layer) {
                        var layerId = layer.target.id;
                        var layerVisibility = map.getLayoutProperty(layerId, 'visibility');
                        console.log(layerId);
                        console.log(map.getLayoutProperty(layerId, 'visibility'));
                        //if the selected layer is off
                        if (layerVisibility !== 'visible') {
                            //turn all the data layers off
                            map.setLayoutProperty('QB_areas_use', 'visibility', 'none');
                            map.setLayoutProperty('QD_routes_use', 'visibility', 'none');
                            map.setLayoutProperty('QE_routes_avoid', 'visibility', 'none');
                            map.setLayoutProperty('QF_areas_avoid', 'visibility', 'none');
                            //turn on the selected one
                            map.setLayoutProperty(layerId, 'visibility', 'visible');
                        }
                    }
                    for (var i = 0; i < inputs.length; i++) {
                        inputs[i].onclick = toggleLayer;
                    }
                </script>

            </div>
            <section>
                <div class="inner" style='text-align: center;'>
                    <h5>Community Partners: </h5>
                    <ul style="white-space: nowrap; list-style: none; display: inline;">
                        <li style="list-style: none; display: inline;">
                            <a href="http://www.tacoma.uw.edu/"><img src="images/uwt.jpg" alt=""/></a>
                        </li>
                        <li style="list-style: none; display: inline;">
                            <a href="https://www.metroparkstacoma.org/"><img src="images/metroparks.jpg" alt=""/></a>
                        </li>
                        <li style="list-style: none; display: inline;">
                            <a href="https://www.tacomaschools.org/"><img src="images/tps-banner.jpg" alt=""/></a>
                        </li>
                        <li style="list-style: none; display: inline;">
                            <a href="https://www.tpchd.org/"><img src="images/tacoma-piercehd.jpg" alt=""/></a>
                        </li>
                        <li style="list-style: none; display: inline;">
                            <a href="http://safest.org//"><img src="images/safestreetslogo.jpg" style="height: 54px;" alt=""/></a>
                        </li>
                        <li style="list-style: none; display: inline;">
                            <a href="http://www.bamfordfoundation.org/"><img src="images/bamford-family-fdn.jpg" style="height: 54px;" alt=""/></a>
                        </li>
                    </ul>
                </div>
            </section>

            <!-- Footer -->
            <footer id="footer">
                <div class="inner">
                    <ul class="copyright">
                        <li>&copy; 2018</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li>
                    </ul>
                </div>
            </footer>

        </div>

        <!-- Scripts -->
        <script src="assets/js/jquery.min.js"></script>
        <script src="assets/js/jquery.scrolly.min.js"></script>
        <script src="assets/js/jquery.scrollex.min.js"></script>
        <script src="assets/js/skel.min.js"></script>
        <script src="assets/js/util.js"></script>
        <!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
        <script src="assets/js/main.js"></script>


    </body>
</html>